FROM openkbs/jdk-mvn-py3-x11

MAINTAINER DrSnowbird "DrSnowbird@openkbs.org"

ARG TARGET_PRODUCT_NAME=${TARGET_PRODUCT_NAME:-"rapidminer-studio"}
ENV TARGET_PRODUCT_NAME=${TARGET_PRODUCT_NAME}

ARG TARGET_PRODUCT_EXECUTABLE=${TARGET_PRODUCT_EXECUTABLE:-"RapidMiner-Studio.sh"}
ENV TARGET_PRODUCT_EXECUTABLE=${TARGET_PRODUCT_EXECUTABLE}

ARG TARGET_PRODUCT_VERSION=${TARGET_PRODUCT_VERSION:-"8.0.1"}
ENV TARGET_PRODUCT_VERSION=${TARGET_PRODUCT_VERSION}

ENV TARGET_INSTALL_DIR="${TARGET_PRODUCT_NAME}-${TARGET_PRODUCT_VERSION}"

## ---- USER_NAME is defined in parent image: openkbs/jre-mvn-py3-x11 already ----
ENV USER_NAME=${USER_NAME:-developer}
ENV HOME=/home/${USER_NAME}

<<<<<<< HEAD
RUN wget -c https://s3.amazonaws.com/rapidminer.releases/rapidminer-studio/8.0.1/rapidminer-studio-8.0.1.zip && \
    unzip rapidminer-studio-8.0.1.zip 
=======
>>>>>>> b098ebbf2d0f9fa8d4c84436aa01cbe8b4d692d8

ARG TARGET_PROJECT_DIR=${TARGET_PROJECT_DIR:-projects}
ENV TARGET_PROJECT_DIR=${TARGET_PROJECT_DIR}
    
## ---- Required by RapidMiner ----
ENV RAPIDMINER_HOME=${HOME}/${TARGET_PRODUCT_NAME}

ARG TARGET_INSTALL_BASE=${TARGET_INSTALL_BASE:-"$HOME"}
ENV TARGET_INSTALL_BASE=${TARGET_INSTALL_BASE}

WORKDIR ${TARGET_INSTALL_BASE}
USER ${USER_NAME} 
RUN wget -c https://s3.amazonaws.com/rapidminer.releases/rapidminer-studio/${TARGET_PRODUCT_VERSION}/${TARGET_INSTALL_DIR}.zip && \
    unzip ${TARGET_INSTALL_DIR}.zip && \
    rm ${TARGET_INSTALL_DIR}.zip && \
    ls -al ${HOME}/${TARGET_PRODUCT_NAME} && \
    mkdir -p ${HOME}/${TARGET_PROJECT_DIR}

VOLUME ${HOME}/${TARGET_PROJECT_DIR}

WORKDIR ${HOME}
CMD "${HOME}/${TARGET_PRODUCT_NAME}/${TARGET_PRODUCT_EXECUTABLE}"
